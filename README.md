# 🎓 一建机电备考 AI 助手系统

一个集成了 AI 问答和历年真题练习的智能备考系统，帮助考生高效备考一级建造师机电工程专业。

## ✨ 核心功能

### 1. 💬 AI 智能问答
- 基于4本教材的RAG（检索增强生成）系统
- 支持自然语言提问
- 提供准确的知识点解答
- 显示相关教材来源

### 2. 📝 历年真题练习
- **选择题练习**：815道选择题（单选+多选）
- **案例题练习**：41个案例，186个小问题
- **卡片切换模式**：一次只显示一道题，专注学习
- **智能筛选**：按科目、年份、题型筛选
- **答案隐藏**：先思考再查看答案

## 📊 数据统计

### 知识库
- 📚 教材数量：4本
- 📄 文档片段：4709条
- 🔍 向量索引：ChromaDB

### 真题库
- 📝 选择题：815道
  - 工程经济：222道
  - 机电实务：80道
  - 法律法规：242道
  - 项目管理：271道
- 📋 案例题：41个案例，186个小问题
  - 覆盖年份：2007-2014, 2021年

## 🚀 快速开始

### 环境要求
- Python 3.8+
- Node.js 20.19+ 或 22.12+
- npm 或 yarn

### 启动系统

#### 方式一：使用启动脚本（推荐）
```bash
chmod +x start_exam_system.sh
./start_exam_system.sh
```

#### 方式二：手动启动

**启动后端API服务器**
```bash
source venv/bin/activate
python3 api_server.py
```

**启动前端开发服务器**（新终端）
```bash
# 切换Node.js版本（如果需要）
source ~/.nvm/nvm.sh
nvm use 22.21.1

# 启动前端
cd frontend
npm run dev
```

### 访问系统
- 🌐 前端界面：http://localhost:5173
- 📡 后端API：http://localhost:5001

## 📖 使用指南

### AI 问答功能

1. 点击顶部 **"💬 AI问答"** 标签
2. 在左侧选择科目（或选择"全部科目"）
3. 在输入框输入问题
4. 点击"发送"或按回车键
5. 查看AI回答和相关教材来源

**示例问题**：
- "什么是焊接质量控制？"
- "机电工程施工组织设计的内容有哪些？"
- "电气设备安装的安全要求是什么？"

### 真题练习功能

1. 点击顶部 **"📝 历年真题"** 标签
2. 选择题型：**选择题** 或 **案例题**
3. 使用筛选器选择科目、年份、题型
4. 阅读题目，思考答案
5. 点击 **"查看答案"** 按钮验证
6. 阅读解析，理解知识点
7. 使用 **"上一题"** / **"下一题"** 切换题目

**学习建议**：
- ✅ 先不看答案，独立思考
- ✅ 做完后再查看答案和解析
- ✅ 错题要仔细阅读解析
- ✅ 按年份练习，了解考试趋势
- ✅ 按题型练习，针对性提高

## 🏗️ 系统架构

```
┌─────────────────────────────────────────────────────────┐
│                     前端 (React)                         │
│  - AI问答界面                                            │
│  - 真题练习界面                                          │
│  - 卡片切换交互                                          │
└─────────────────────────────────────────────────────────┘
                            ↓ HTTP
┌─────────────────────────────────────────────────────────┐
│                  后端API (Flask)                         │
│  - /api/ask          - AI问答接口                        │
│  - /api/search       - 知识检索接口                      │
│  - /api/exam/stats   - 真题统计接口                      │
│  - /api/exam/questions - 选择题接口                      │
│  - /api/exam/cases   - 案例题接口                        │
└─────────────────────────────────────────────────────────┘
                            ↓
┌──────────────────────┐  ┌──────────────────────┐
│   知识库 (ChromaDB)   │  │  真题库 (SQLite)      │
│  - 4709条文档片段     │  │  - 815道选择题        │
│  - 向量索引           │  │  - 41个案例题         │
└──────────────────────┘  └──────────────────────┘
```

## 📁 项目结构

```
Desktop/kaoLong/
├── README.md                      # 项目说明文档
├── requirements.txt               # Python依赖
├── start_exam_system.sh          # 启动脚本
│
├── 教材/                          # 教材PDF文件
├── 机电历年真题/                  # 真题PDF文件
│   └── parsed_data/              # 解析后的JSON数据
│
├── data/                         # 数据目录
│   ├── chroma_db/               # ChromaDB向量数据库
│   └── exam_questions.db        # SQLite真题数据库
│
├── build_knowledge_base.py      # 知识库构建脚本
├── exam_parser.py               # 选择题解析器
├── case_parser.py               # 案例题解析器
├── exam_database.py             # 真题数据库管理
├── api_server.py                # Flask API服务器
│
└── frontend/                    # React前端
    └── src/
        ├── App.jsx              # 主应用
        └── components/
            └── ExamQuestions.jsx    # 真题组件
```

## 🔧 技术栈

### 后端
- **Python 3.8+**
- **Flask** - Web框架
- **ChromaDB** - 向量数据库
- **OpenAI API** - AI模型
- **pdfplumber** - PDF解析
- **SQLite** - 真题数据库

### 前端
- **React 18** - UI框架
- **Vite** - 构建工具
- **Axios** - HTTP客户端
- **CSS3** - 样式

## 🔍 常见问题

### Q: 如何切换Node.js版本？
```bash
source ~/.nvm/nvm.sh
nvm use 22.21.1
```

### Q: 前端端口被占用怎么办？
Vite会自动尝试其他端口（5174, 5175等）

### Q: API服务器端口被占用怎么办？
```bash
# 查找占用端口的进程
lsof -ti:5001

# 杀死进程
kill -9 <PID>
```

## 📈 性能优化

### 已实现
- ✅ 卡片切换模式 - 减少DOM渲染
- ✅ 一次性加载 - 减少API请求
- ✅ SQLite多线程优化 - 支持并发访问
- ✅ 响应式设计 - 适配多种设备

## 🎯 未来规划

### 功能增强
- [ ] 用户系统（登录/注册）
- [ ] 做题记录保存
- [ ] 错题本功能
- [ ] 收藏功能
- [ ] 答题统计分析
- [ ] 模拟考试模式

### 数据扩展
- [ ] 补充2015-2020年案例题（需OCR）
- [ ] 补充更多科目真题
- [ ] 补充答案解析

---

**祝您备考顺利，一次通过！** 🎉

